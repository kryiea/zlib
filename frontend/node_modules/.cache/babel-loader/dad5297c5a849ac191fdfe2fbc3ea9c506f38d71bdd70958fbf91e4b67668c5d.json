{"ast":null,"code":"import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createStaticVNode as _createStaticVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nvar _hoisted_1 = {\n  id: \"app\"\n};\nvar _hoisted_2 = {\n  \"class\": \"container pb-5\"\n};\nvar _hoisted_3 = {\n  \"class\": \"app-content\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_SearchBar = _resolveComponent(\"SearchBar\");\n  var _component_SearchResults = _resolveComponent(\"SearchResults\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[0] || (_cache[0] = _createElementVNode(\"nav\", {\n    \"class\": \"navbar navbar-expand-lg navbar-primary bg-primary\"\n  }, [_createElementVNode(\"div\", {\n    \"class\": \"container\"\n  }, [_createElementVNode(\"a\", {\n    \"class\": \"navbar-brand text-white\",\n    href: \"#\"\n  }, [_createElementVNode(\"i\", {\n    \"class\": \"bi bi-book-half\"\n  }), _createTextVNode(\" E-Book Search \")])])], -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_SearchBar, {\n    onSearch: $options.handleSearch\n  }, null, 8 /* PROPS */, [\"onSearch\"]), _createVNode(_component_SearchResults, {\n    books: $data.searchResults,\n    platforms: $data.platforms,\n    hasSearched: $data.hasSearched\n  }, null, 8 /* PROPS */, [\"books\", \"platforms\", \"hasSearched\"])])]), _cache[1] || (_cache[1] = _createStaticVNode(\"<footer class=\\\"app-footer\\\"><div class=\\\"container\\\"><div class=\\\"footer-content\\\"><div class=\\\"footer-logo\\\"><i class=\\\"bi bi-book-half\\\"></i> E-Book Search </div><div class=\\\"footer-text\\\">© 2024 E-Book Search. 一站式电子书搜索平台</div></div></div></footer>\", 1))]);\n}","map":{"version":3,"names":["id","_createElementBlock","_hoisted_1","_createElementVNode","href","_createTextVNode","_hoisted_2","_hoisted_3","_createVNode","_component_SearchBar","onSearch","$options","handleSearch","_component_SearchResults","books","$data","searchResults","platforms","hasSearched","_createStaticVNode"],"sources":["D:\\zlib\\frontend\\src\\App.vue"],"sourcesContent":["<template>\r\n  <div id=\"app\">\r\n    <nav class=\"navbar navbar-expand-lg navbar-primary bg-primary\">\r\n      <div class=\"container\">\r\n        <a class=\"navbar-brand text-white\" href=\"#\">\r\n          <i class=\"bi bi-book-half\"></i> E-Book Search\r\n        </a>\r\n      </div>\r\n    </nav>\r\n\r\n    <div class=\"container pb-5\">\r\n      <div class=\"app-content\">\r\n        <SearchBar @search=\"handleSearch\" />\r\n        \r\n        <SearchResults \r\n          :books=\"searchResults\"\r\n          :platforms=\"platforms\"\r\n          :hasSearched=\"hasSearched\"\r\n        />\r\n      </div>\r\n    </div>\r\n    \r\n    <footer class=\"app-footer\">\r\n      <div class=\"container\">\r\n        <div class=\"footer-content\">\r\n          <div class=\"footer-logo\">\r\n            <i class=\"bi bi-book-half\"></i> E-Book Search\r\n          </div>\r\n          <div class=\"footer-text\">© 2024 E-Book Search. 一站式电子书搜索平台</div>\r\n        </div>\r\n      </div>\r\n    </footer>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SearchBar from './components/SearchBar.vue'\r\nimport SearchResults from './components/SearchResults.vue'\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  name: 'App',\r\n  components: {\r\n    SearchBar,\r\n    SearchResults\r\n  },\r\n  data() {\r\n    return {\r\n      searchResults: [],\r\n      platforms: [\r\n        { id: 'zlibrary', name: 'Z-Library', available: true, total: 0 }\r\n      ],\r\n      hasSearched: false\r\n    }\r\n  },\r\n  methods: {\r\n    async handleSearch(keyword) {\r\n      try {\r\n        this.hasSearched = true;\r\n        this.searchResults = []; // 清空之前的搜索结果\r\n        const response = await axios.get(`/api/zlibrary/s/${encodeURIComponent(keyword)}`);\r\n        \r\n        if (response.data) {\r\n          this.searchResults = response.data.books;\r\n          \r\n          // 更新平台状态\r\n          if (response.data.platform_status) {\r\n            const status = response.data.platform_status;\r\n            this.platforms = [{\r\n              id: status.id,\r\n              name: status.name,\r\n              available: status.available,\r\n              total: status.total\r\n            }];\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('Search failed:', error);\r\n        this.searchResults = [];\r\n        this.platforms = this.platforms.map(p => ({\r\n          ...p,\r\n          available: false,\r\n          total: 0\r\n        }));\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n#app {\r\n  min-height: 100vh;\r\n  background-color: #f8fafc;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.navbar {\r\n  margin-bottom: 2rem;\r\n  box-shadow: 0 4px 12px rgba(0,0,0,0.08);\r\n  background: linear-gradient(135deg, #4f46e5, #3b82f6) !important;\r\n  padding: 1rem 0;\r\n}\r\n\r\n.navbar-brand {\r\n  font-weight: 600;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.75rem;\r\n  color: #ffffff !important;\r\n  font-size: 1.25rem;\r\n  letter-spacing: 0.5px;\r\n}\r\n\r\n.navbar-brand i {\r\n  font-size: 1.5rem;\r\n}\r\n\r\n.container {\r\n  max-width: 1200px;\r\n  padding: 0 1.5rem;\r\n  margin: 0 auto;\r\n  width: 100%;\r\n}\r\n\r\n.app-content {\r\n  flex: 1;\r\n  padding: 1rem 0 3rem;\r\n}\r\n\r\n.app-footer {\r\n  margin-top: auto;\r\n  background-color: #1e293b;\r\n  color: #e2e8f0;\r\n  padding: 2rem 0;\r\n}\r\n\r\n.footer-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 1rem;\r\n  text-align: center;\r\n}\r\n\r\n.footer-logo {\r\n  font-weight: 600;\r\n  font-size: 1.25rem;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.footer-text {\r\n  font-size: 0.875rem;\r\n  opacity: 0.8;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .container {\r\n    padding: 0 1rem;\r\n  }\r\n  \r\n  .navbar {\r\n    padding: 0.75rem 0;\r\n  }\r\n  \r\n  .navbar-brand {\r\n    font-size: 1.125rem;\r\n  }\r\n}\r\n</style>"],"mappings":";;EACOA,EAAE,EAAC;AAAK;;EASN,SAAM;AAAgB;;EACpB,SAAM;AAAa;;;;uBAV5BC,mBAAA,CA+BM,OA/BNC,UA+BM,G,0BA9BJC,mBAAA,CAMM;IAND,SAAM;EAAmD,IAC5DA,mBAAA,CAIM;IAJD,SAAM;EAAW,IACpBA,mBAAA,CAEI;IAFD,SAAM,yBAAyB;IAACC,IAAI,EAAC;MACtCD,mBAAA,CAA+B;IAA5B,SAAM;EAAiB,IALpCE,gBAAA,CAKyC,iBACjC,E,0BAIJF,mBAAA,CAUM,OAVNG,UAUM,GATJH,mBAAA,CAQM,OARNI,UAQM,GAPJC,YAAA,CAAoCC,oBAAA;IAAxBC,QAAM,EAAEC,QAAA,CAAAC;EAAY,uCAEhCJ,YAAA,CAIEK,wBAAA;IAHCC,KAAK,EAAEC,KAAA,CAAAC,aAAa;IACpBC,SAAS,EAAEF,KAAA,CAAAE,SAAS;IACpBC,WAAW,EAAEH,KAAA,CAAAG;gGAjBxBC,kBAAA,oQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}