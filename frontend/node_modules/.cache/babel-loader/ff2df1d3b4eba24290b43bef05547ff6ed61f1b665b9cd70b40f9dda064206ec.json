{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nexport default {\n  name: 'SearchResults',\n  props: {\n    results: {\n      type: Array,\n      required: true\n    },\n    loading: {\n      type: Boolean,\n      \"default\": false\n    },\n    total: {\n      type: Number,\n      \"default\": 0\n    },\n    currentPage: {\n      type: Number,\n      \"default\": 1\n    },\n    totalPages: {\n      type: Number,\n      \"default\": 0\n    },\n    hasSearched: {\n      type: Boolean,\n      \"default\": false\n    }\n  },\n  computed: {\n    displayedPages: function displayedPages() {\n      var pages = [];\n      var maxDisplayed = 5;\n      var start = Math.max(1, this.currentPage - 2);\n      var end = Math.min(this.totalPages, start + maxDisplayed - 1);\n      if (end - start + 1 < maxDisplayed) {\n        start = Math.max(1, end - maxDisplayed + 1);\n      }\n      for (var i = start; i <= end; i++) {\n        pages.push(i);\n      }\n      return pages;\n    }\n  },\n  methods: {\n    handlePageChange: function handlePageChange(page) {\n      if (page >= 1 && page <= this.totalPages && page !== this.currentPage) {\n        this.$emit('page-change', page);\n      }\n    }\n  }\n};","map":{"version":3,"names":["name","props","results","type","Array","required","loading","Boolean","total","Number","currentPage","totalPages","hasSearched","computed","displayedPages","pages","maxDisplayed","start","Math","max","end","min","i","push","methods","handlePageChange","page","$emit"],"sources":["D:\\zlib\\frontend\\src\\components\\SearchResults.vue"],"sourcesContent":["<template>\r\n  <div class=\"search-results\">\r\n    <!-- Loading spinner -->\r\n    <div v-if=\"loading\" class=\"text-center my-5\">\r\n      <div class=\"spinner-border text-primary\" role=\"status\">\r\n        <span class=\"visually-hidden\">加载中...</span>\r\n      </div>\r\n      <div class=\"mt-2 text-muted\">正在搜索中，请稍候...</div>\r\n    </div>\r\n\r\n    <!-- Results -->\r\n    <div v-else>\r\n      <!-- Results count -->\r\n      <div v-if=\"total > 0\" class=\"alert alert-success mb-4\">\r\n        找到 {{ total }} 个结果\r\n      </div>\r\n\r\n      <!-- No results message -->\r\n      <div v-else-if=\"hasSearched\" class=\"alert alert-warning mb-4\">\r\n        未找到相关书籍，请尝试其他关键词\r\n      </div>\r\n\r\n      <!-- Results list -->\r\n      <div class=\"book-list\">\r\n        <!-- Header -->\r\n        <div class=\"book-header card shadow-sm mb-3\">\r\n          <div class=\"card-body py-2\">\r\n            <div class=\"row align-items-center\">\r\n              <div class=\"col-md-6\">\r\n                <strong class=\"text-muted\">书籍信息</strong>\r\n              </div>\r\n              <div class=\"col-md-2\">\r\n                <strong class=\"text-muted\">作者</strong>\r\n              </div>\r\n              <div class=\"col-md-2\">\r\n                <strong class=\"text-muted\">来源</strong>\r\n              </div>\r\n              <div class=\"col-md-2\">\r\n                <strong class=\"text-muted\">操作</strong>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Empty state -->\r\n        <div v-if=\"results.length === 0 && !hasSearched\" class=\"card shadow-sm empty-state\">\r\n          <div class=\"card-body text-center py-5\">\r\n            <i class=\"bi bi-book text-muted mb-3\" style=\"font-size: 3rem;\"></i>\r\n            <h5 class=\"text-muted\">输入书名或ISBN开始搜索</h5>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Book items -->\r\n        <div v-for=\"(book, index) in results\" :key=\"index\" class=\"book-item card shadow-sm mb-3\">\r\n          <div class=\"card-body\">\r\n            <div class=\"row align-items-center\">\r\n              <div class=\"col-md-6\">\r\n                <h5 class=\"card-title text-primary mb-1\">{{ book.title }}</h5>\r\n                <div class=\"text-muted small\">\r\n                  <span v-if=\"book.year\" class=\"me-2\">出版年份: {{ book.year }}</span>\r\n                </div>\r\n              </div>\r\n              <div class=\"col-md-2\">\r\n                <span class=\"text-muted\">{{ book.author }}</span>\r\n              </div>\r\n              <div class=\"col-md-2\">\r\n                <span class=\"badge bg-info\">{{ book.source }}</span>\r\n              </div>\r\n              <div class=\"col-md-2\">\r\n                <a\r\n                  :href=\"book.download_url\"\r\n                  target=\"_blank\"\r\n                  class=\"btn btn-outline-primary btn-sm\"\r\n                  rel=\"noopener noreferrer\"\r\n                >\r\n                  <i class=\"bi bi-download me-1\"></i>\r\n                  下载\r\n                </a>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Pagination -->\r\n      <div v-if=\"totalPages > 1\" class=\"d-flex justify-content-center mt-4\">\r\n        <nav aria-label=\"Search results pages\">\r\n          <ul class=\"pagination\">\r\n            <li class=\"page-item\" :class=\"{ disabled: currentPage === 1 }\">\r\n              <a\r\n                class=\"page-link\"\r\n                href=\"#\"\r\n                @click.prevent=\"handlePageChange(currentPage - 1)\"\r\n              >\r\n                上一页\r\n              </a>\r\n            </li>\r\n            <li\r\n              v-for=\"page in displayedPages\"\r\n              :key=\"page\"\r\n              class=\"page-item\"\r\n              :class=\"{ active: page === currentPage }\"\r\n            >\r\n              <a\r\n                class=\"page-link\"\r\n                href=\"#\"\r\n                @click.prevent=\"handlePageChange(page)\"\r\n              >\r\n                {{ page }}\r\n              </a>\r\n            </li>\r\n            <li\r\n              class=\"page-item\"\r\n              :class=\"{ disabled: currentPage === totalPages }\"\r\n            >\r\n              <a\r\n                class=\"page-link\"\r\n                href=\"#\"\r\n                @click.prevent=\"handlePageChange(currentPage + 1)\"\r\n              >\r\n                下一页\r\n              </a>\r\n            </li>\r\n          </ul>\r\n        </nav>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'SearchResults',\r\n  props: {\r\n    results: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n    loading: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    total: {\r\n      type: Number,\r\n      default: 0\r\n    },\r\n    currentPage: {\r\n      type: Number,\r\n      default: 1\r\n    },\r\n    totalPages: {\r\n      type: Number,\r\n      default: 0\r\n    },\r\n    hasSearched: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  computed: {\r\n    displayedPages() {\r\n      const pages = [];\r\n      const maxDisplayed = 5;\r\n      let start = Math.max(1, this.currentPage - 2);\r\n      let end = Math.min(this.totalPages, start + maxDisplayed - 1);\r\n      \r\n      if (end - start + 1 < maxDisplayed) {\r\n        start = Math.max(1, end - maxDisplayed + 1);\r\n      }\r\n      \r\n      for (let i = start; i <= end; i++) {\r\n        pages.push(i);\r\n      }\r\n      \r\n      return pages;\r\n    }\r\n  },\r\n  methods: {\r\n    handlePageChange(page) {\r\n      if (page >= 1 && page <= this.totalPages && page !== this.currentPage) {\r\n        this.$emit('page-change', page);\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.search-results {\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.book-list {\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.book-header {\r\n  background-color: #f8f9fa;\r\n}\r\n\r\n.book-item {\r\n  border: none;\r\n  transition: transform 0.2s;\r\n}\r\n\r\n.book-item:hover {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15) !important;\r\n}\r\n\r\n.empty-state {\r\n  background-color: #f8f9fa;\r\n  border: none;\r\n}\r\n\r\n.badge {\r\n  font-weight: normal;\r\n  padding: 0.5em 1em;\r\n}\r\n\r\n.pagination {\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.page-link {\r\n  padding: 0.5rem 1rem;\r\n}\r\n\r\n.btn-outline-primary:hover {\r\n  transform: translateY(-1px);\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.card-title {\r\n  margin-bottom: 0.25rem;\r\n  font-size: 1.1rem;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .row > div {\r\n    margin-bottom: 0.5rem;\r\n  }\r\n  \r\n  .row > div:last-child {\r\n    margin-bottom: 0;\r\n  }\r\n}\r\n</style> "],"mappings":";;AAmIA,eAAe;EACbA,IAAI,EAAE,eAAe;EACrBC,KAAK,EAAE;IACLC,OAAO,EAAE;MACPC,IAAI,EAAEC,KAAK;MACXC,QAAQ,EAAE;IACZ,CAAC;IACDC,OAAO,EAAE;MACPH,IAAI,EAAEI,OAAO;MACb,WAAS;IACX,CAAC;IACDC,KAAK,EAAE;MACLL,IAAI,EAAEM,MAAM;MACZ,WAAS;IACX,CAAC;IACDC,WAAW,EAAE;MACXP,IAAI,EAAEM,MAAM;MACZ,WAAS;IACX,CAAC;IACDE,UAAU,EAAE;MACVR,IAAI,EAAEM,MAAM;MACZ,WAAS;IACX,CAAC;IACDG,WAAW,EAAE;MACXT,IAAI,EAAEI,OAAO;MACb,WAAS;IACX;EACF,CAAC;EACDM,QAAQ,EAAE;IACRC,cAAc,WAAdA,cAAcA,CAAA,EAAG;MACf,IAAMC,KAAI,GAAI,EAAE;MAChB,IAAMC,YAAW,GAAI,CAAC;MACtB,IAAIC,KAAI,GAAIC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE,IAAI,CAACT,WAAU,GAAI,CAAC,CAAC;MAC7C,IAAIU,GAAE,GAAIF,IAAI,CAACG,GAAG,CAAC,IAAI,CAACV,UAAU,EAAEM,KAAI,GAAID,YAAW,GAAI,CAAC,CAAC;MAE7D,IAAII,GAAE,GAAIH,KAAI,GAAI,IAAID,YAAY,EAAE;QAClCC,KAAI,GAAIC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEC,GAAE,GAAIJ,YAAW,GAAI,CAAC,CAAC;MAC7C;MAEA,KAAK,IAAIM,CAAA,GAAIL,KAAK,EAAEK,CAAA,IAAKF,GAAG,EAAEE,CAAC,EAAE,EAAE;QACjCP,KAAK,CAACQ,IAAI,CAACD,CAAC,CAAC;MACf;MAEA,OAAOP,KAAK;IACd;EACF,CAAC;EACDS,OAAO,EAAE;IACPC,gBAAgB,WAAhBA,gBAAgBA,CAACC,IAAI,EAAE;MACrB,IAAIA,IAAG,IAAK,KAAKA,IAAG,IAAK,IAAI,CAACf,UAAS,IAAKe,IAAG,KAAM,IAAI,CAAChB,WAAW,EAAE;QACrE,IAAI,CAACiB,KAAK,CAAC,aAAa,EAAED,IAAI,CAAC;MACjC;IACF;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}