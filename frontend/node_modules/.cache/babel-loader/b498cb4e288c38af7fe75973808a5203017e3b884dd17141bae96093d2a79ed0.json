{"ast":null,"code":"import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nvar _hoisted_1 = {\n  id: \"app\"\n};\nvar _hoisted_2 = {\n  \"class\": \"container pb-5\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_SearchBar = _resolveComponent(\"SearchBar\");\n  var _component_SearchResults = _resolveComponent(\"SearchResults\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[0] || (_cache[0] = _createElementVNode(\"nav\", {\n    \"class\": \"navbar navbar-expand-lg navbar-primary bg-primary\"\n  }, [_createElementVNode(\"div\", {\n    \"class\": \"container\"\n  }, [_createElementVNode(\"a\", {\n    \"class\": \"navbar-brand text-white\",\n    href: \"#\"\n  }, [_createElementVNode(\"i\", {\n    \"class\": \"bi bi-book\"\n  }), _createTextVNode(\" 电子书搜索 \")])])], -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_SearchBar, {\n    onSearch: $options.handleSearch\n  }, null, 8 /* PROPS */, [\"onSearch\"]), _createVNode(_component_SearchResults, {\n    books: $data.searchResults,\n    platforms: $data.platforms,\n    hasSearched: $data.hasSearched\n  }, null, 8 /* PROPS */, [\"books\", \"platforms\", \"hasSearched\"])])]);\n}","map":{"version":3,"names":["id","_createElementBlock","_hoisted_1","_createElementVNode","href","_createTextVNode","_hoisted_2","_createVNode","_component_SearchBar","onSearch","$options","handleSearch","_component_SearchResults","books","$data","searchResults","platforms","hasSearched"],"sources":["D:\\zlib\\frontend\\src\\App.vue"],"sourcesContent":["<template>\r\n  <div id=\"app\">\r\n    <nav class=\"navbar navbar-expand-lg navbar-primary bg-primary\">\r\n      <div class=\"container\">\r\n        <a class=\"navbar-brand text-white\" href=\"#\">\r\n          <i class=\"bi bi-book\"></i> 电子书搜索\r\n        </a>\r\n      </div>\r\n    </nav>\r\n\r\n    <div class=\"container pb-5\">\r\n      <SearchBar @search=\"handleSearch\" />\r\n      \r\n      <SearchResults \r\n        :books=\"searchResults\"\r\n        :platforms=\"platforms\"\r\n        :hasSearched=\"hasSearched\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SearchBar from './components/SearchBar.vue'\r\nimport SearchResults from './components/SearchResults.vue'\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  name: 'App',\r\n  components: {\r\n    SearchBar,\r\n    SearchResults\r\n  },\r\n  data() {\r\n    return {\r\n      searchResults: [],\r\n      platforms: [\r\n        { id: 'zlibrary', name: 'Z-Library', available: true, total: 0 }\r\n      ],\r\n      hasSearched: false\r\n    }\r\n  },\r\n  methods: {\r\n    async handleSearch(keyword) {\r\n      try {\r\n        this.hasSearched = true;\r\n        const response = await axios.get(`/api/search?keyword=${encodeURIComponent(keyword)}`);\r\n        \r\n        if (response.data && response.data.content) {\r\n          this.searchResults = response.data.content.books;\r\n          \r\n          // 更新平台状态\r\n          if (response.data.content.platform_status) {\r\n            const status = response.data.content.platform_status;\r\n            this.platforms = [{\r\n              id: status.id,\r\n              name: status.name,\r\n              available: status.available,\r\n              total: status.total\r\n            }];\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('Search failed:', error);\r\n        this.searchResults = [];\r\n        this.platforms = this.platforms.map(p => ({\r\n          ...p,\r\n          available: false,\r\n          total: 0\r\n        }));\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n#app {\r\n  min-height: 100vh;\r\n  background-color: #f3f4f6;\r\n}\r\n\r\n.navbar {\r\n  margin-bottom: 2rem;\r\n  box-shadow: 0 1px 3px rgba(0,0,0,0.1);\r\n  background: linear-gradient(to right, #10b981, #059669) !important;\r\n}\r\n\r\n.navbar-brand {\r\n  font-weight: 500;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.navbar-brand i {\r\n  font-size: 1.25rem;\r\n}\r\n\r\n.container {\r\n  max-width: 1200px;\r\n  padding: 0 1rem;\r\n  margin: 0 auto;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .container {\r\n    padding: 0 0.75rem;\r\n  }\r\n}\r\n</style> "],"mappings":";;EACOA,EAAE,EAAC;AAAK;;EASN,SAAM;AAAgB;;;;uBAT7BC,mBAAA,CAkBM,OAlBNC,UAkBM,G,0BAjBJC,mBAAA,CAMM;IAND,SAAM;EAAmD,IAC5DA,mBAAA,CAIM;IAJD,SAAM;EAAW,IACpBA,mBAAA,CAEI;IAFD,SAAM,yBAAyB;IAACC,IAAI,EAAC;MACtCD,mBAAA,CAA0B;IAAvB,SAAM;EAAY,IAL/BE,gBAAA,CAKoC,SAC5B,E,0BAIJF,mBAAA,CAQM,OARNG,UAQM,GAPJC,YAAA,CAAoCC,oBAAA;IAAxBC,QAAM,EAAEC,QAAA,CAAAC;EAAY,uCAEhCJ,YAAA,CAIEK,wBAAA;IAHCC,KAAK,EAAEC,KAAA,CAAAC,aAAa;IACpBC,SAAS,EAAEF,KAAA,CAAAE,SAAS;IACpBC,WAAW,EAAEH,KAAA,CAAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}