{"ast":null,"code":"import _toConsumableArray from \"D:/zlib/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, Fragment as _Fragment, renderList as _renderList, createTextVNode as _createTextVNode, withModifiers as _withModifiers, normalizeClass as _normalizeClass } from \"vue\";\nvar _hoisted_1 = {\n  \"class\": \"search-results\"\n};\nvar _hoisted_2 = {\n  key: 0,\n  \"class\": \"text-center my-5\"\n};\nvar _hoisted_3 = {\n  key: 0,\n  \"class\": \"alert alert-success mb-4\"\n};\nvar _hoisted_4 = {\n  \"class\": \"row\"\n};\nvar _hoisted_5 = {\n  key: 0,\n  \"class\": \"col-12 mb-4\"\n};\nvar _hoisted_6 = {\n  \"class\": \"card shadow-sm h-100\"\n};\nvar _hoisted_7 = {\n  \"class\": \"card-body\"\n};\nvar _hoisted_8 = {\n  \"class\": \"d-flex justify-content-between align-items-start\"\n};\nvar _hoisted_9 = {\n  \"class\": \"card-title text-primary mb-2\"\n};\nvar _hoisted_10 = {\n  \"class\": \"card-subtitle mb-2 text-muted\"\n};\nvar _hoisted_11 = {\n  key: 0,\n  \"class\": \"ms-2\"\n};\nvar _hoisted_12 = {\n  \"class\": \"badge bg-info\"\n};\nvar _hoisted_13 = [\"href\"];\nvar _hoisted_14 = {\n  key: 2,\n  \"class\": \"d-flex justify-content-center mt-4\"\n};\nvar _hoisted_15 = {\n  \"aria-label\": \"Search results pages\"\n};\nvar _hoisted_16 = {\n  \"class\": \"pagination\"\n};\nvar _hoisted_17 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" Loading spinner \"), $props.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, _cache[2] || (_cache[2] = [_createElementVNode(\"div\", {\n    \"class\": \"spinner-border text-primary\",\n    role: \"status\"\n  }, [_createElementVNode(\"span\", {\n    \"class\": \"visually-hidden\"\n  }, \"加载中...\")], -1 /* HOISTED */), _createElementVNode(\"div\", {\n    \"class\": \"mt-2 text-muted\"\n  }, \"正在搜索中，请稍候...\", -1 /* HOISTED */)]))) : (_openBlock(), _createElementBlock(_Fragment, {\n    key: 1\n  }, [_createCommentVNode(\" Results \"), _createElementVNode(\"div\", null, [_createCommentVNode(\" Results count \"), $props.total > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, \" 找到 \" + _toDisplayString($props.total) + \" 个结果 \", 1 /* TEXT */)) : $props.hasSearched ? (_openBlock(), _createElementBlock(_Fragment, {\n    key: 1\n  }, [_createCommentVNode(\" No results message \"), _cache[3] || (_cache[3] = _createElementVNode(\"div\", {\n    \"class\": \"alert alert-warning mb-4\"\n  }, \" 未找到相关书籍，请尝试其他关键词 \", -1 /* HOISTED */))], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */)) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Results list \"), _createElementVNode(\"div\", _hoisted_4, [$props.results.length === 0 && !$props.hasSearched ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, _cache[4] || (_cache[4] = [_createElementVNode(\"div\", {\n    \"class\": \"card shadow-sm empty-state\"\n  }, [_createElementVNode(\"div\", {\n    \"class\": \"card-body text-center py-5\"\n  }, [_createElementVNode(\"i\", {\n    \"class\": \"bi bi-book text-muted mb-3\",\n    style: {\n      \"font-size\": \"3rem\"\n    }\n  }), _createElementVNode(\"h5\", {\n    \"class\": \"text-muted\"\n  }, \"输入书名或ISBN开始搜索\")])], -1 /* HOISTED */)]))) : _createCommentVNode(\"v-if\", true), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($props.results, function (book, index) {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: index,\n      \"class\": \"col-12 mb-4\"\n    }, [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"div\", null, [_createElementVNode(\"h5\", _hoisted_9, _toDisplayString(book.title), 1 /* TEXT */), _createElementVNode(\"h6\", _hoisted_10, [_createTextVNode(_toDisplayString(book.author) + \" \", 1 /* TEXT */), book.year ? (_openBlock(), _createElementBlock(\"span\", _hoisted_11, \"(\" + _toDisplayString(book.year) + \")\", 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)])]), _createElementVNode(\"span\", _hoisted_12, _toDisplayString(book.source), 1 /* TEXT */)]), _createElementVNode(\"a\", {\n      href: book.download_url,\n      target: \"_blank\",\n      \"class\": \"btn btn-outline-primary mt-3\",\n      rel: \"noopener noreferrer\"\n    }, _toConsumableArray(_cache[5] || (_cache[5] = [_createElementVNode(\"i\", {\n      \"class\": \"bi bi-download me-1\"\n    }, null, -1 /* HOISTED */), _createTextVNode(\" 下载 \")])), 8 /* PROPS */, _hoisted_13)])])]);\n  }), 128 /* KEYED_FRAGMENT */))]), _createCommentVNode(\" Pagination \"), $props.totalPages > 1 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_14, [_createElementVNode(\"nav\", _hoisted_15, [_createElementVNode(\"ul\", _hoisted_16, [_createElementVNode(\"li\", {\n    \"class\": _normalizeClass([\"page-item\", {\n      disabled: $props.currentPage === 1\n    }])\n  }, [_createElementVNode(\"a\", {\n    \"class\": \"page-link\",\n    href: \"#\",\n    onClick: _cache[0] || (_cache[0] = _withModifiers(function ($event) {\n      return $options.handlePageChange($props.currentPage - 1);\n    }, [\"prevent\"]))\n  }, \" 上一页 \")], 2 /* CLASS */), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.displayedPages, function (page) {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: page,\n      \"class\": _normalizeClass([\"page-item\", {\n        active: page === $props.currentPage\n      }])\n    }, [_createElementVNode(\"a\", {\n      \"class\": \"page-link\",\n      href: \"#\",\n      onClick: _withModifiers(function ($event) {\n        return $options.handlePageChange(page);\n      }, [\"prevent\"])\n    }, _toDisplayString(page), 9 /* TEXT, PROPS */, _hoisted_17)], 2 /* CLASS */);\n  }), 128 /* KEYED_FRAGMENT */)), _createElementVNode(\"li\", {\n    \"class\": _normalizeClass([\"page-item\", {\n      disabled: $props.currentPage === $props.totalPages\n    }])\n  }, [_createElementVNode(\"a\", {\n    \"class\": \"page-link\",\n    href: \"#\",\n    onClick: _cache[1] || (_cache[1] = _withModifiers(function ($event) {\n      return $options.handlePageChange($props.currentPage + 1);\n    }, [\"prevent\"]))\n  }, \" 下一页 \")], 2 /* CLASS */)])])])) : _createCommentVNode(\"v-if\", true)])], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))]);\n}","map":{"version":3,"names":["key","_createElementBlock","_hoisted_1","_createCommentVNode","$props","loading","_hoisted_2","_cache","_createElementVNode","role","_Fragment","total","_hoisted_3","_toDisplayString","hasSearched","_hoisted_4","results","length","_hoisted_5","style","_renderList","book","index","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","title","_hoisted_10","_createTextVNode","author","year","_hoisted_11","_hoisted_12","source","href","download_url","target","rel","_hoisted_13","totalPages","_hoisted_14","_hoisted_15","_hoisted_16","_normalizeClass","disabled","currentPage","onClick","_withModifiers","$event","$options","handlePageChange","displayedPages","page","active","_hoisted_17"],"sources":["D:\\zlib\\frontend\\src\\components\\SearchResults.vue"],"sourcesContent":["<template>\r\n  <div class=\"search-results\">\r\n    <!-- Loading spinner -->\r\n    <div v-if=\"loading\" class=\"text-center my-5\">\r\n      <div class=\"spinner-border text-primary\" role=\"status\">\r\n        <span class=\"visually-hidden\">加载中...</span>\r\n      </div>\r\n      <div class=\"mt-2 text-muted\">正在搜索中，请稍候...</div>\r\n    </div>\r\n\r\n    <!-- Results -->\r\n    <div v-else>\r\n      <!-- Results count -->\r\n      <div v-if=\"total > 0\" class=\"alert alert-success mb-4\">\r\n        找到 {{ total }} 个结果\r\n      </div>\r\n\r\n      <!-- No results message -->\r\n      <div v-else-if=\"hasSearched\" class=\"alert alert-warning mb-4\">\r\n        未找到相关书籍，请尝试其他关键词\r\n      </div>\r\n\r\n      <!-- Results list -->\r\n      <div class=\"row\">\r\n        <div v-if=\"results.length === 0 && !hasSearched\" class=\"col-12 mb-4\">\r\n          <div class=\"card shadow-sm empty-state\">\r\n            <div class=\"card-body text-center py-5\">\r\n              <i class=\"bi bi-book text-muted mb-3\" style=\"font-size: 3rem;\"></i>\r\n              <h5 class=\"text-muted\">输入书名或ISBN开始搜索</h5>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div v-for=\"(book, index) in results\" :key=\"index\" class=\"col-12 mb-4\">\r\n          <div class=\"card shadow-sm h-100\">\r\n            <div class=\"card-body\">\r\n              <div class=\"d-flex justify-content-between align-items-start\">\r\n                <div>\r\n                  <h5 class=\"card-title text-primary mb-2\">{{ book.title }}</h5>\r\n                  <h6 class=\"card-subtitle mb-2 text-muted\">\r\n                    {{ book.author }} \r\n                    <span v-if=\"book.year\" class=\"ms-2\">({{ book.year }})</span>\r\n                  </h6>\r\n                </div>\r\n                <span class=\"badge bg-info\">{{ book.source }}</span>\r\n              </div>\r\n              <a\r\n                :href=\"book.download_url\"\r\n                target=\"_blank\"\r\n                class=\"btn btn-outline-primary mt-3\"\r\n                rel=\"noopener noreferrer\"\r\n              >\r\n                <i class=\"bi bi-download me-1\"></i>\r\n                下载\r\n              </a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Pagination -->\r\n      <div v-if=\"totalPages > 1\" class=\"d-flex justify-content-center mt-4\">\r\n        <nav aria-label=\"Search results pages\">\r\n          <ul class=\"pagination\">\r\n            <li class=\"page-item\" :class=\"{ disabled: currentPage === 1 }\">\r\n              <a\r\n                class=\"page-link\"\r\n                href=\"#\"\r\n                @click.prevent=\"handlePageChange(currentPage - 1)\"\r\n              >\r\n                上一页\r\n              </a>\r\n            </li>\r\n            <li\r\n              v-for=\"page in displayedPages\"\r\n              :key=\"page\"\r\n              class=\"page-item\"\r\n              :class=\"{ active: page === currentPage }\"\r\n            >\r\n              <a\r\n                class=\"page-link\"\r\n                href=\"#\"\r\n                @click.prevent=\"handlePageChange(page)\"\r\n              >\r\n                {{ page }}\r\n              </a>\r\n            </li>\r\n            <li\r\n              class=\"page-item\"\r\n              :class=\"{ disabled: currentPage === totalPages }\"\r\n            >\r\n              <a\r\n                class=\"page-link\"\r\n                href=\"#\"\r\n                @click.prevent=\"handlePageChange(currentPage + 1)\"\r\n              >\r\n                下一页\r\n              </a>\r\n            </li>\r\n          </ul>\r\n        </nav>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'SearchResults',\r\n  props: {\r\n    results: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n    loading: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    total: {\r\n      type: Number,\r\n      default: 0\r\n    },\r\n    currentPage: {\r\n      type: Number,\r\n      default: 1\r\n    },\r\n    totalPages: {\r\n      type: Number,\r\n      default: 0\r\n    },\r\n    hasSearched: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  computed: {\r\n    displayedPages() {\r\n      const pages = [];\r\n      const maxDisplayed = 5;\r\n      let start = Math.max(1, this.currentPage - 2);\r\n      let end = Math.min(this.totalPages, start + maxDisplayed - 1);\r\n      \r\n      if (end - start + 1 < maxDisplayed) {\r\n        start = Math.max(1, end - maxDisplayed + 1);\r\n      }\r\n      \r\n      for (let i = start; i <= end; i++) {\r\n        pages.push(i);\r\n      }\r\n      \r\n      return pages;\r\n    }\r\n  },\r\n  methods: {\r\n    handlePageChange(page) {\r\n      if (page >= 1 && page <= this.totalPages && page !== this.currentPage) {\r\n        this.$emit('page-change', page);\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.search-results {\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.card {\r\n  border: none;\r\n  transition: transform 0.2s;\r\n}\r\n\r\n.card:hover {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15) !important;\r\n}\r\n\r\n.empty-state {\r\n  background-color: #f8f9fa;\r\n}\r\n\r\n.badge {\r\n  font-weight: normal;\r\n  padding: 0.5em 1em;\r\n}\r\n\r\n.pagination {\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.page-link {\r\n  padding: 0.5rem 1rem;\r\n}\r\n\r\n.btn-outline-primary:hover {\r\n  transform: translateY(-1px);\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n}\r\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}