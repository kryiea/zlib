{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nexport default {\n  name: 'SearchResults',\n  props: {\n    results: {\n      type: Array,\n      required: true\n    },\n    loading: {\n      type: Boolean,\n      \"default\": false\n    },\n    total: {\n      type: Number,\n      \"default\": 0\n    },\n    currentPage: {\n      type: Number,\n      \"default\": 1\n    },\n    totalPages: {\n      type: Number,\n      \"default\": 0\n    },\n    hasSearched: {\n      type: Boolean,\n      \"default\": false\n    },\n    platformStatus: {\n      type: Object,\n      \"default\": function _default() {\n        return {};\n      }\n    }\n  },\n  data: function data() {\n    return {\n      exampleBooks: [{\n        title: '三体（全集）',\n        author: '刘慈欣',\n        year: '2012',\n        isbn: '9787229042066',\n        source: '示例'\n      }, {\n        title: '百年孤独',\n        author: '加西亚·马尔克斯',\n        year: '2011',\n        isbn: '9787544253994',\n        source: '示例'\n      }, {\n        title: '人类简史：从动物到上帝',\n        author: '尤瓦尔·赫拉利',\n        year: '2014',\n        isbn: '9787508647357',\n        source: '示例'\n      }]\n    };\n  },\n  computed: {\n    displayedPages: function displayedPages() {\n      var pages = [];\n      var maxDisplayed = 5;\n      var start = Math.max(1, this.currentPage - 2);\n      var end = Math.min(this.totalPages, start + maxDisplayed - 1);\n      if (end - start + 1 < maxDisplayed) {\n        start = Math.max(1, end - maxDisplayed + 1);\n      }\n      for (var i = start; i <= end; i++) {\n        pages.push(i);\n      }\n      return pages;\n    }\n  },\n  methods: {\n    handlePageChange: function handlePageChange(page) {\n      if (page >= 1 && page <= this.totalPages && page !== this.currentPage) {\n        this.$emit('page-change', page);\n      }\n    }\n  }\n};","map":{"version":3,"names":["name","props","results","type","Array","required","loading","Boolean","total","Number","currentPage","totalPages","hasSearched","platformStatus","Object","default","data","exampleBooks","title","author","year","isbn","source","computed","displayedPages","pages","maxDisplayed","start","Math","max","end","min","i","push","methods","handlePageChange","page","$emit"],"sources":["D:\\zlib\\frontend\\src\\components\\SearchResults.vue"],"sourcesContent":["<template>\r\n  <div class=\"search-results\">\r\n    <!-- Loading spinner -->\r\n    <div v-if=\"loading\" class=\"text-center my-5\">\r\n      <div class=\"spinner-border text-primary\" role=\"status\">\r\n        <span class=\"visually-hidden\">加载中...</span>\r\n      </div>\r\n      <div class=\"mt-2 text-muted\">正在搜索中，请稍候...</div>\r\n    </div>\r\n\r\n    <!-- Results -->\r\n    <div v-else>\r\n      <!-- Platform status -->\r\n      <div v-if=\"hasSearched && platformStatus\" class=\"alert alert-info mb-4\">\r\n        <h6 class=\"mb-2\">搜索结果来源：</h6>\r\n        <div class=\"platform-status\">\r\n          <span \r\n            v-for=\"(available, platform) in platformStatus\" \r\n            :key=\"platform\"\r\n            class=\"badge me-2\"\r\n            :class=\"available ? 'bg-success' : 'bg-secondary'\"\r\n          >\r\n            {{ platform }}: {{ available ? '有结果' : '无结果' }}\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Results count -->\r\n      <div v-if=\"total > 0\" class=\"alert alert-success mb-4\">\r\n        找到 {{ total }} 个结果\r\n      </div>\r\n\r\n      <!-- No results message -->\r\n      <div v-else-if=\"hasSearched\" class=\"alert alert-warning mb-4\">\r\n        未找到相关书籍，请尝试其他关键词\r\n      </div>\r\n\r\n      <!-- Results list -->\r\n      <div class=\"book-list\">\r\n        <!-- Header -->\r\n        <div class=\"book-header card shadow-sm mb-3\">\r\n          <div class=\"card-body py-2\">\r\n            <div class=\"row align-items-center\">\r\n              <div class=\"col-md-4\">\r\n                <strong class=\"text-muted\">书籍信息</strong>\r\n              </div>\r\n              <div class=\"col-md-2\">\r\n                <strong class=\"text-muted\">作者</strong>\r\n              </div>\r\n              <div class=\"col-md-2\">\r\n                <strong class=\"text-muted\">ISBN</strong>\r\n              </div>\r\n              <div class=\"col-md-2\">\r\n                <strong class=\"text-muted\">来源</strong>\r\n              </div>\r\n              <div class=\"col-md-2\">\r\n                <strong class=\"text-muted\">操作</strong>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Example books (shown when no search and no results) -->\r\n        <div v-if=\"results.length === 0 && !hasSearched\">\r\n          <div v-for=\"(book, index) in exampleBooks\" :key=\"index\" class=\"book-item card shadow-sm mb-3 example-book\">\r\n            <div class=\"card-body\">\r\n              <div class=\"row align-items-center\">\r\n                <div class=\"col-md-4\">\r\n                  <h5 class=\"card-title text-muted mb-1\">{{ book.title }}</h5>\r\n                  <div class=\"text-muted small\">\r\n                    <span class=\"me-2\">出版年份: {{ book.year }}</span>\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-md-2\">\r\n                  <span class=\"text-muted\">{{ book.author }}</span>\r\n                </div>\r\n                <div class=\"col-md-2\">\r\n                  <span class=\"text-muted\">{{ book.isbn }}</span>\r\n                </div>\r\n                <div class=\"col-md-2\">\r\n                  <span class=\"badge bg-secondary\">{{ book.source }}</span>\r\n                </div>\r\n                <div class=\"col-md-2\">\r\n                  <button class=\"btn btn-outline-secondary btn-sm\" disabled>\r\n                    <i class=\"bi bi-download me-1\"></i>\r\n                    下载\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"text-center mt-4\">\r\n            <p class=\"text-muted\">↑ 以上为示例数据，输入书名或ISBN开始搜索 ↑</p>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Search results -->\r\n        <div v-for=\"(book, index) in results\" :key=\"'result-'+index\" class=\"book-item card shadow-sm mb-3\">\r\n          <div class=\"card-body\">\r\n            <div class=\"row align-items-center\">\r\n              <div class=\"col-md-4\">\r\n                <h5 class=\"card-title text-primary mb-1\">{{ book.title }}</h5>\r\n                <div class=\"text-muted small\">\r\n                  <span v-if=\"book.year\" class=\"me-2\">出版年份: {{ book.year }}</span>\r\n                </div>\r\n              </div>\r\n              <div class=\"col-md-2\">\r\n                <span class=\"text-muted\">{{ book.author }}</span>\r\n              </div>\r\n              <div class=\"col-md-2\">\r\n                <span class=\"text-muted\">{{ book.isbn || '暂无' }}</span>\r\n              </div>\r\n              <div class=\"col-md-2\">\r\n                <span class=\"badge bg-info\">{{ book.source }}</span>\r\n              </div>\r\n              <div class=\"col-md-2\">\r\n                <a\r\n                  :href=\"book.book_url\"\r\n                  target=\"_blank\"\r\n                  class=\"btn btn-outline-primary btn-sm\"\r\n                  rel=\"noopener noreferrer\"\r\n                >\r\n                  <i class=\"bi bi-link-45deg me-1\"></i>\r\n                  查看详情\r\n                </a>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Pagination -->\r\n      <div v-if=\"totalPages > 1\" class=\"d-flex justify-content-center mt-4\">\r\n        <nav aria-label=\"Search results pages\">\r\n          <ul class=\"pagination\">\r\n            <li class=\"page-item\" :class=\"{ disabled: currentPage === 1 }\">\r\n              <a class=\"page-link\" href=\"#\" @click.prevent=\"handlePageChange(currentPage - 1)\">\r\n                上一页\r\n              </a>\r\n            </li>\r\n            <li v-for=\"page in displayedPages\" :key=\"page\" class=\"page-item\" :class=\"{ active: page === currentPage }\">\r\n              <a class=\"page-link\" href=\"#\" @click.prevent=\"handlePageChange(page)\">\r\n                {{ page }}\r\n              </a>\r\n            </li>\r\n            <li class=\"page-item\" :class=\"{ disabled: currentPage === totalPages }\">\r\n              <a class=\"page-link\" href=\"#\" @click.prevent=\"handlePageChange(currentPage + 1)\">\r\n                下一页\r\n              </a>\r\n            </li>\r\n          </ul>\r\n        </nav>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'SearchResults',\r\n  props: {\r\n    results: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n    loading: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    total: {\r\n      type: Number,\r\n      default: 0\r\n    },\r\n    currentPage: {\r\n      type: Number,\r\n      default: 1\r\n    },\r\n    totalPages: {\r\n      type: Number,\r\n      default: 0\r\n    },\r\n    hasSearched: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    platformStatus: {\r\n      type: Object,\r\n      default: () => ({})\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      exampleBooks: [\r\n        {\r\n          title: '三体（全集）',\r\n          author: '刘慈欣',\r\n          year: '2012',\r\n          isbn: '9787229042066',\r\n          source: '示例'\r\n        },\r\n        {\r\n          title: '百年孤独',\r\n          author: '加西亚·马尔克斯',\r\n          year: '2011',\r\n          isbn: '9787544253994',\r\n          source: '示例'\r\n        },\r\n        {\r\n          title: '人类简史：从动物到上帝',\r\n          author: '尤瓦尔·赫拉利',\r\n          year: '2014',\r\n          isbn: '9787508647357',\r\n          source: '示例'\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  computed: {\r\n    displayedPages() {\r\n      const pages = [];\r\n      const maxDisplayed = 5;\r\n      let start = Math.max(1, this.currentPage - 2);\r\n      let end = Math.min(this.totalPages, start + maxDisplayed - 1);\r\n      \r\n      if (end - start + 1 < maxDisplayed) {\r\n        start = Math.max(1, end - maxDisplayed + 1);\r\n      }\r\n      \r\n      for (let i = start; i <= end; i++) {\r\n        pages.push(i);\r\n      }\r\n      \r\n      return pages;\r\n    }\r\n  },\r\n  methods: {\r\n    handlePageChange(page) {\r\n      if (page >= 1 && page <= this.totalPages && page !== this.currentPage) {\r\n        this.$emit('page-change', page);\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.search-results {\r\n  max-width: 1000px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.book-list {\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.book-header {\r\n  background-color: #f8f9fa;\r\n}\r\n\r\n.book-item {\r\n  border: none;\r\n  transition: transform 0.2s;\r\n}\r\n\r\n.book-item:hover {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15) !important;\r\n}\r\n\r\n.example-book {\r\n  opacity: 0.7;\r\n}\r\n\r\n.example-book:hover {\r\n  transform: none;\r\n  box-shadow: none !important;\r\n}\r\n\r\n.badge {\r\n  font-weight: normal;\r\n  padding: 0.5em 1em;\r\n}\r\n\r\n.pagination {\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.page-link {\r\n  padding: 0.5rem 1rem;\r\n}\r\n\r\n.btn-outline-primary:hover {\r\n  transform: translateY(-1px);\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.card-title {\r\n  margin-bottom: 0.25rem;\r\n  font-size: 1.1rem;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .row > div {\r\n    margin-bottom: 0.5rem;\r\n  }\r\n  \r\n  .row > div:last-child {\r\n    margin-bottom: 0;\r\n  }\r\n}\r\n</style> "],"mappings":";;AA8JA,eAAe;EACbA,IAAI,EAAE,eAAe;EACrBC,KAAK,EAAE;IACLC,OAAO,EAAE;MACPC,IAAI,EAAEC,KAAK;MACXC,QAAQ,EAAE;IACZ,CAAC;IACDC,OAAO,EAAE;MACPH,IAAI,EAAEI,OAAO;MACb,WAAS;IACX,CAAC;IACDC,KAAK,EAAE;MACLL,IAAI,EAAEM,MAAM;MACZ,WAAS;IACX,CAAC;IACDC,WAAW,EAAE;MACXP,IAAI,EAAEM,MAAM;MACZ,WAAS;IACX,CAAC;IACDE,UAAU,EAAE;MACVR,IAAI,EAAEM,MAAM;MACZ,WAAS;IACX,CAAC;IACDG,WAAW,EAAE;MACXT,IAAI,EAAEI,OAAO;MACb,WAAS;IACX,CAAC;IACDM,cAAc,EAAE;MACdV,IAAI,EAAEW,MAAM;MACZ,WAAS,SAATC,QAAOA,CAAA;QAAA,OAAS,CAAC,CAAC;MAAA;IACpB;EACF,CAAC;EACDC,IAAI,WAAJA,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,YAAY,EAAE,CACZ;QACEC,KAAK,EAAE,QAAQ;QACfC,MAAM,EAAE,KAAK;QACbC,IAAI,EAAE,MAAM;QACZC,IAAI,EAAE,eAAe;QACrBC,MAAM,EAAE;MACV,CAAC,EACD;QACEJ,KAAK,EAAE,MAAM;QACbC,MAAM,EAAE,UAAU;QAClBC,IAAI,EAAE,MAAM;QACZC,IAAI,EAAE,eAAe;QACrBC,MAAM,EAAE;MACV,CAAC,EACD;QACEJ,KAAK,EAAE,aAAa;QACpBC,MAAM,EAAE,SAAS;QACjBC,IAAI,EAAE,MAAM;QACZC,IAAI,EAAE,eAAe;QACrBC,MAAM,EAAE;MACV;IAEJ;EACF,CAAC;EACDC,QAAQ,EAAE;IACRC,cAAc,WAAdA,cAAcA,CAAA,EAAG;MACf,IAAMC,KAAI,GAAI,EAAE;MAChB,IAAMC,YAAW,GAAI,CAAC;MACtB,IAAIC,KAAI,GAAIC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE,IAAI,CAACnB,WAAU,GAAI,CAAC,CAAC;MAC7C,IAAIoB,GAAE,GAAIF,IAAI,CAACG,GAAG,CAAC,IAAI,CAACpB,UAAU,EAAEgB,KAAI,GAAID,YAAW,GAAI,CAAC,CAAC;MAE7D,IAAII,GAAE,GAAIH,KAAI,GAAI,IAAID,YAAY,EAAE;QAClCC,KAAI,GAAIC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEC,GAAE,GAAIJ,YAAW,GAAI,CAAC,CAAC;MAC7C;MAEA,KAAK,IAAIM,CAAA,GAAIL,KAAK,EAAEK,CAAA,IAAKF,GAAG,EAAEE,CAAC,EAAE,EAAE;QACjCP,KAAK,CAACQ,IAAI,CAACD,CAAC,CAAC;MACf;MAEA,OAAOP,KAAK;IACd;EACF,CAAC;EACDS,OAAO,EAAE;IACPC,gBAAgB,WAAhBA,gBAAgBA,CAACC,IAAI,EAAE;MACrB,IAAIA,IAAG,IAAK,KAAKA,IAAG,IAAK,IAAI,CAACzB,UAAS,IAAKyB,IAAG,KAAM,IAAI,CAAC1B,WAAW,EAAE;QACrE,IAAI,CAAC2B,KAAK,CAAC,aAAa,EAAED,IAAI,CAAC;MACjC;IACF;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}