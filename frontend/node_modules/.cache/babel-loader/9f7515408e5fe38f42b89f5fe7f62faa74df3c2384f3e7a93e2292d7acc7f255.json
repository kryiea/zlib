{"ast":null,"code":"import _toConsumableArray from \"D:/zlib/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport \"core-js/modules/es.array.sort.js\";\nimport \"core-js/modules/es.parse-int.js\";\nexport default {\n  name: 'SearchResults',\n  props: {\n    books: {\n      type: Array,\n      \"default\": function _default() {\n        return [];\n      }\n    },\n    platforms: {\n      type: Array,\n      \"default\": function _default() {\n        return [{\n          id: 'zlibrary',\n          name: 'Z-Library',\n          available: true,\n          total: 0\n        }];\n      }\n    },\n    hasSearched: {\n      type: Boolean,\n      \"default\": false\n    }\n  },\n  data: function data() {\n    return {\n      sortOrder: 'desc',\n      // 默认降序排列\n      debounceTimer: null,\n      exampleBooks: [{\n        title: '示例书籍 1',\n        author: '作者名称',\n        year: '2024',\n        pages: '300',\n        language: '简体中文',\n        filesize: '10 MB',\n        extension: 'PDF',\n        publisher: '示例出版社',\n        source: 'Z-Library',\n        platform_id: 'zlibrary'\n      }, {\n        title: '示例书籍 2',\n        author: '示例作者',\n        year: '2023',\n        pages: '250',\n        language: '英文',\n        filesize: '8 MB',\n        extension: 'EPUB',\n        publisher: 'Example Press',\n        source: 'Z-Library',\n        platform_id: 'zlibrary'\n      }]\n    };\n  },\n  computed: {\n    getSortTitle: function getSortTitle() {\n      switch (this.sortOrder) {\n        case 'none':\n          return '点击降序排列';\n        case 'desc':\n          return '点击升序排列';\n        case 'asc':\n          return '点击取消排序';\n        default:\n          return '默认排序标题';\n      }\n    },\n    getSortIcon: function getSortIcon() {\n      switch (this.sortOrder) {\n        case 'none':\n          return 'bi-dash';\n        case 'desc':\n          return 'bi-sort-down';\n        case 'asc':\n          return 'bi-sort-up';\n        default:\n          return 'bi-dash';\n      }\n    },\n    sortedBooks: function sortedBooks() {\n      return this.sortBooks(this.books);\n    },\n    sortedExampleBooks: function sortedExampleBooks() {\n      return this.sortBooks(this.exampleBooks);\n    }\n  },\n  methods: {\n    toggleSort: function toggleSort() {\n      switch (this.sortOrder) {\n        case 'none':\n          this.sortOrder = 'desc';\n          break;\n        case 'desc':\n          this.sortOrder = 'asc';\n          break;\n        case 'asc':\n          this.sortOrder = 'none';\n          break;\n        default:\n          this.sortOrder = 'none';\n      }\n      this.persistSortOrder(this.sortOrder);\n    },\n    persistSortOrder: function persistSortOrder(order) {\n      localStorage.setItem('bookSortOrder', order);\n    },\n    sortBooks: function sortBooks(books) {\n      var _this = this;\n      if (this.sortOrder === 'none') {\n        return books;\n      }\n      return _toConsumableArray(books).sort(function (a, b) {\n        var yearA = parseInt(a.year, 10) || 0;\n        var yearB = parseInt(b.year, 10) || 0;\n        if (yearA === yearB) {\n          return a.title.localeCompare(b.title);\n        }\n        return _this.sortOrder === 'asc' ? yearA - yearB : yearB - yearA;\n      });\n    }\n  }\n};","map":{"version":3,"names":["name","props","books","type","Array","default","platforms","id","available","total","hasSearched","Boolean","data","sortOrder","debounceTimer","exampleBooks","title","author","year","pages","language","filesize","extension","publisher","source","platform_id","computed","getSortTitle","getSortIcon","sortedBooks","sortBooks","sortedExampleBooks","methods","toggleSort","persistSortOrder","order","localStorage","setItem","_this","_toConsumableArray","sort","a","b","yearA","parseInt","yearB","localeCompare"],"sources":["D:\\zlib\\frontend\\src\\components\\SearchResults.vue"],"sourcesContent":["<template>\n  <div class=\"search-results\">\n    <!-- 平台状态栏 -->\n    <div class=\"platform-status-bar\" v-if=\"platforms.length > 0\">\n      <div class=\"platform-status-title\">搜索来源:</div>\n      <div class=\"platform-badges\">\n        <span v-for=\"platform in platforms\" \n              :key=\"platform.id\"\n              :class=\"['platform-badge', {'platform-badge-available': platform.available}]\">\n          {{ platform.name }}: {{ platform.available ? `找到 ${platform.total} 个结果` : '无结果' }}\n        </span>\n      </div>\n    </div>\n\n    <!-- 搜索结果表格 -->\n    <div class=\"results-table\" v-if=\"books.length > 0\">\n      <div class=\"table-header\">\n        <div class=\"col-book-info\">\n          书籍信息\n          <button class=\"sort-button\" @click=\"toggleSort\" :title=\"getSortTitle\">\n            年份排序\n            <i class=\"bi\" :class=\"getSortIcon\"></i>\n          </button>\n        </div>\n        <div class=\"col-publisher\">出版商</div>\n        <div class=\"col-link\">直达链接</div>\n        <div class=\"col-source\">来源平台</div>\n      </div>\n\n      <div class=\"table-row\" v-for=\"book in sortedBooks\" :key=\"book.isbn\">\n        <div class=\"col-book-info\">\n          <div class=\"book-info-main\">\n            <div class=\"book-title\">{{ book.title }}</div>\n            <div class=\"book-author\" v-if=\"book.author\">{{ book.author }}</div>\n          </div>\n          <div class=\"book-details\">\n            <span v-if=\"book.year\">{{ book.year }}</span>\n            <span v-if=\"book.language\">{{ book.language }}</span>\n            <span v-if=\"book.filesize\">{{ book.filesize }}</span>\n            <span v-if=\"book.extension\">{{ book.extension }}</span>\n            <span v-if=\"book.isbn\">ISBN: {{ book.isbn }}</span>\n          </div>\n        </div>\n        <div class=\"col-publisher\">{{ book.publisher }}</div>\n        <div class=\"col-link\">\n          <a :href=\"book.book_url\" target=\"_blank\" class=\"download-link\">\n            <i class=\"fas fa-download\"></i> 下载\n          </a>\n        </div>\n        <div class=\"col-source\">\n          <span :class=\"['source-badge', `source-${book.platform_id}`]\">\n            {{ book.source }}\n          </span>\n        </div>\n      </div>\n    </div>\n\n    <!-- 无结果提示 -->\n    <div v-else-if=\"hasSearched\" class=\"no-results\">\n      未找到相关书籍\n    </div>\n\n    <!-- 默认示例书籍 -->\n    <div v-else class=\"example-books\">\n      <div class=\"example-title\">示例书籍</div>\n      <div class=\"results-table\">\n        <div class=\"table-header\">\n          <div class=\"col-book-info\">\n            书籍信息\n            <button class=\"sort-button\" @click=\"toggleSort\" :title=\"getSortTitle\">\n              年份排序\n              <i class=\"bi\" :class=\"getSortIcon\"></i>\n            </button>\n          </div>\n          <div class=\"col-publisher\">出版商</div>\n          <div class=\"col-link\">直达链接</div>\n          <div class=\"col-source\">来源平台</div>\n        </div>\n        \n        <div class=\"table-row\" v-for=\"book in sortedExampleBooks\" :key=\"book.isbn\">\n          <div class=\"col-book-info\">\n            <div class=\"book-title\">{{ book.title }}</div>\n            <div class=\"book-details\">\n              <span>{{ book.year }}</span>\n              <span>| {{ book.language }}</span>\n              <span>| {{ book.filesize }}</span>\n              <span>| {{ book.extension }}</span>\n            </div>\n          </div>\n          <div class=\"col-author\">{{ book.author }}</div>\n          <div class=\"col-publisher\">{{ book.publisher }}</div>\n          <div class=\"col-link\">\n            <button class=\"download-link\" disabled>\n              <i class=\"fas fa-download\"></i> 示例\n            </button>\n          </div>\n          <div class=\"col-source\">\n            <span class=\"source-badge\">{{ book.source }}</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'SearchResults',\n  props: {\n    books: {\n      type: Array,\n      default: () => []\n    },\n    platforms: {\n      type: Array,\n      default: () => [\n        { id: 'zlibrary', name: 'Z-Library', available: true, total: 0 }\n      ]\n    },\n    hasSearched: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      sortOrder: 'desc',  // 默认降序排列\n      debounceTimer: null,\n      exampleBooks: [\n        {\n          title: '示例书籍 1',\n          author: '作者名称',\n          year: '2024',\n          pages: '300',\n          language: '简体中文',\n          filesize: '10 MB',\n          extension: 'PDF',\n          publisher: '示例出版社',\n          source: 'Z-Library',\n          platform_id: 'zlibrary'\n        },\n        {\n          title: '示例书籍 2',\n          author: '示例作者',\n          year: '2023',\n          pages: '250',\n          language: '英文',\n          filesize: '8 MB',\n          extension: 'EPUB',\n          publisher: 'Example Press',\n          source: 'Z-Library',\n          platform_id: 'zlibrary'\n        }\n      ]\n    }\n  },\n  computed: {\n    getSortTitle() {\n      switch(this.sortOrder) {\n        case 'none':\n          return '点击降序排列';\n        case 'desc':\n          return '点击升序排列';\n        case 'asc':\n          return '点击取消排序';\n        default:\n          return '默认排序标题';\n      }\n    },\n    getSortIcon() {\n      switch(this.sortOrder) {\n        case 'none':\n          return 'bi-dash';\n        case 'desc':\n          return 'bi-sort-down';\n        case 'asc':\n          return 'bi-sort-up';\n        default:\n          return 'bi-dash';\n      }\n    },\n    sortedBooks() {\n      return this.sortBooks(this.books);\n    },\n    sortedExampleBooks() {\n      return this.sortBooks(this.exampleBooks);\n    }\n  },\n  methods: {\n    toggleSort() {\n      switch(this.sortOrder) {\n        case 'none':\n          this.sortOrder = 'desc';\n          break;\n        case 'desc':\n          this.sortOrder = 'asc';\n          break;\n        case 'asc':\n          this.sortOrder = 'none';\n          break;\n        default:\n          this.sortOrder = 'none';\n      }\n      this.persistSortOrder(this.sortOrder);\n    },\n    persistSortOrder(order) {\n      localStorage.setItem('bookSortOrder', order);\n    },\n    sortBooks(books) {\n      if (this.sortOrder === 'none') {\n        return books;\n      }\n      \n      return [...books].sort((a, b) => {\n        const yearA = parseInt(a.year, 10) || 0;\n        const yearB = parseInt(b.year, 10) || 0;\n        \n        if (yearA === yearB) {\n          return a.title.localeCompare(b.title);\n        }\n        \n        return this.sortOrder === 'asc' ? yearA - yearB : yearB - yearA;\n      });\n    }\n  }\n}\n</script>\n\n<style scoped>\n.search-results {\n  margin-top: 20px;\n}\n\n.platform-status-bar {\n  margin-bottom: 1.5rem;\n  padding: 0.75rem 1rem;\n  background-color: #ffffff;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  box-shadow: 0 1px 3px rgba(0,0,0,0.1);\n}\n\n.platform-status-title {\n  margin-right: 1rem;\n  font-weight: 500;\n  color: #374151;\n}\n\n.platform-badges {\n  display: flex;\n  gap: 0.75rem;\n}\n\n.platform-badge {\n  padding: 0.375rem 0.75rem;\n  border-radius: 6px;\n  background-color: #e5e7eb;\n  color: #4b5563;\n  font-size: 0.875rem;\n  transition: all 0.2s ease;\n}\n\n.platform-badge-available {\n  background-color: #10b981;\n  color: #ffffff;\n}\n\n.results-table {\n  background: #ffffff;\n  border-radius: 8px;\n  box-shadow: 0 1px 3px rgba(0,0,0,0.1);\n  overflow: hidden;\n}\n\n.table-header {\n  display: grid;\n  grid-template-columns: minmax(300px, 3fr) minmax(150px, 1fr) minmax(120px, 1fr) minmax(120px, 1fr);\n  background-color: #f9fafb;\n  padding: 1rem;\n  font-weight: 500;\n  color: #374151;\n  border-bottom: 1px solid #e5e7eb;\n}\n\n.table-row {\n  display: grid;\n  grid-template-columns: minmax(300px, 3fr) minmax(150px, 1fr) minmax(120px, 1fr) minmax(120px, 1fr);\n  padding: 1rem;\n  border-bottom: 1px solid #e5e7eb;\n  transition: background-color 0.2s ease;\n}\n\n.table-row:hover {\n  background-color: #f9fafb;\n}\n\n.book-info-main {\n  margin-bottom: 0.5rem;\n}\n\n.book-title {\n  font-weight: 500;\n  color: #111827;\n  line-height: 1.4;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  white-space: normal;\n  min-height: 2.8em;\n}\n\n.book-author {\n  font-size: 0.875rem;\n  color: #4b5563;\n  margin-top: 0.25rem;\n}\n\n.book-details {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.75rem;\n  font-size: 0.875rem;\n  color: #6b7280;\n  line-height: 1.5;\n}\n\n.book-details span {\n  display: inline-flex;\n  align-items: center;\n  white-space: nowrap;\n}\n\n.book-details span:not(:last-child)::after {\n  content: \"\";\n  display: inline-block;\n  width: 4px;\n  height: 4px;\n  background-color: #d1d5db;\n  border-radius: 50%;\n  margin-left: 0.75rem;\n}\n\n.download-link {\n  padding: 0.375rem 1rem;\n  background-color: #10b981;\n  color: white;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  text-decoration: none;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n  font-size: 0.875rem;\n  transition: all 0.2s ease;\n  min-width: 90px;\n  height: 32px;\n}\n\n.download-link:hover {\n  background-color: #059669;\n}\n\n.download-link:disabled {\n  background-color: #e5e7eb;\n  color: #9ca3af;\n  cursor: not-allowed;\n}\n\n.source-badge {\n  padding: 0.375rem 0.75rem;\n  border-radius: 6px;\n  background-color: #10b981;\n  color: white;\n  font-size: 0.875rem;\n  font-weight: 500;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  height: 32px;\n  min-width: 90px;\n}\n\n.source-zlibrary {\n  background-color: #10b981;\n}\n\n.no-results {\n  text-align: center;\n  padding: 3rem 1.5rem;\n  color: #6b7280;\n  background: #ffffff;\n  border-radius: 8px;\n  box-shadow: 0 1px 3px rgba(0,0,0,0.1);\n}\n\n.example-books {\n  opacity: 0.8;\n}\n\n.example-title {\n  margin-bottom: 1rem;\n  font-weight: 500;\n  color: #4b5563;\n  font-size: 0.875rem;\n}\n\n.col-link {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.col-source {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.sort-button {\n  background: none;\n  border: none;\n  color: #4b5563;\n  cursor: pointer;\n  padding: 0.25rem 0.5rem;\n  margin-left: 0.5rem;\n  font-size: 0.875rem;\n  display: inline-flex;\n  align-items: center;\n  gap: 0.25rem;\n  border-radius: 4px\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}